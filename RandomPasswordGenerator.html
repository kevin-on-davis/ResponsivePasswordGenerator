<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Password Generator</title>
  </head>
  <body>

    <!-- <h1>Open the console to see the magic!</h1> -->


      <!-- // FUNCTION EXECUTION
      // ================================================================================ -->

        <!-- var myPassword = generate_password(14, true, true, true, true);
        var myPassword = gen_pw_array_vs(14, true, true, true, true);
        console.log(myPassword);
        console.log(myPassword.length); -->

    <div class="row">
        <!--7 Column Cards stacked and shuffled to display content-->
            <div id="random_generator" >
                <div class="card"  style="margin: 0 auto; position:relative; top:0">
                        <h1 class="card-title" style="margin: 0 auto; width: 45vw;  border: solid black; border-style:outset; background:white; padding:1vw; text-align: center">Password Generator</h1>
                        <div class="card-body" style="margin: 0 auto; width: 45vw;  border: solid black; border-style:outset; background:white; padding:1vw">
                            <form name="myPWForm" style="margin: 0 auto; width: 40vw;  border: solid black; border-style:outset; background:white; padding:2vw">
                                    <label for="pw_length">Enter required password length (8 - 128 characters) : </label><input id="pw_length" type="number" name="password_length" style="width:3vw"><br/>
                                    <p>Include :</p>
                                    <p>
                                        <label><input id="chkbx_array" type="checkbox" name="character_type[]" value="true" /> Special characters</label>
                                        <label><input id="chkbx_array" type="checkbox" name="character_type[]" value="true" /> Numeric characters</label>
                                        <label><input id="chkbx_array" type="checkbox" name="character_type[]" value="true" /> Uppercase characters</label>
                                        <label><input id="chkbx_array" type="checkbox" name="character_type[]" value="true" /> Lowercase characters</label>
                                    </p>
                            
                                    <div class="row" style=" border:none; width:100vw">
                                        <div id ="gen_method" style="position:relative; width:40vw">
                                            <!-- <h1>${</h1>
                                            <input class="col-sm-3" type="text" name="random_pw_by_string" style="position:relative; height:3vw; font-size: 2vw"> -->
                                        </div>
                                    </div>
                                    <br/>
                                    <input type="button" value="Generate Password" 
                                        onclick="run_pw_generate()">
                            </form>
                        </div>
                </div>
            </div>
    </div>

    <script>
            debugger;
            // Event Listeners
            document.getElementById("pw_length").addEventListener("blur", validateInput);
            var valnum;
                    
                    valnum=myPWForm.elements.pw_length.value;
                    console.log(document.getElementById("pw_length").value);
                    console.log(myPWForm.pw_length.value);




            // FUNCTIONS
            // ================================================================================
              
          function validateInput()
                {

                    if (myPWForm.elements.pw_length.value < 8 || myPWForm.elements.pw_length.value > 128 || isNaN(myPWForm.elements.pw_length.value))
                    {
                        alert(`Password length must be numeric with a value between 8 and 128,  ${myPWForm.elements.pw_length.value} is invalid`);
                        return false;
                    }
                    else
                    {
                        return true;
                    }
                }

          function gen_pw_array_vs(usr_req_length, allow_specials_chars, allow_numeric_chars, allow_lowercase_alphabet, allow_uppercase_alphabet)
              {
      
                  var composite_chr_str;
                  var myGeneratedPW;

      
                  if (allow_specials_chars)
                  {
                      for( var i = 33; i <= 47; i++ )
                      {
                          if (typeof composite_chr_str == "undefined")
                          {
                              composite_chr_str = String.fromCharCode( i );
                          }
                          else
                          {
                              composite_chr_str += String.fromCharCode( i );
                          }
                      } 
                      for( var i = 58; i <= 64; i++ )
                      {
                          if (typeof composite_chr_str == "undefined")
                          {
                              composite_chr_str = String.fromCharCode( i );
                          }
                          else
                          {
                              composite_chr_str += String.fromCharCode( i );
                          }
                      } 
                      for( var i = 91; i <= 96; i++ )
                      {
                          if (typeof composite_chr_str == "undefined")
                          {
                              composite_chr_str = String.fromCharCode( i );
                          }
                          else
                          {
                              composite_chr_str += String.fromCharCode( i );
                          }
                      } 
                      for( var i = 123; i <= 126; i++ )
                      {
                          if (typeof composite_chr_str == "undefined")
                          {
                              composite_chr_str = String.fromCharCode( i );
                          }
                          else
                          {
                              composite_chr_str += String.fromCharCode( i );
                          }
                      } 
                  }
      
                  if (allow_numeric_chars)
                  {
                      for( var i = 48; i <= 57; i++ )
                      {
                          if (typeof composite_chr_str == "undefined")
                          {
                              composite_chr_str = String.fromCharCode( i );
                          }
                          else
                          {
                              composite_chr_str += String.fromCharCode( i );
                          }
                      } 
                  }
      
                  if (allow_lowercase_alphabet)
                  {
                      for( var i = 97; i <= 122; i++ )
                      {
                          if (typeof composite_chr_str == "undefined")
                          {
                              composite_chr_str = String.fromCharCode( i );
                          }
                          else
                          {
                              composite_chr_str += String.fromCharCode( i );
                          }
                      } 
                  }
      
                  if (allow_uppercase_alphabet)
                  {
                      for( var i = 65; i <= 90; i++ )
                      {
                          if (typeof composite_chr_str == "undefined")
                          {
                              composite_chr_str = String.fromCharCode( i );
                          }
                          else
                          {
                              composite_chr_str += String.fromCharCode( i );
                          }
                      } 
                  }
                  
                  if (composite_chr_str.length > 0)
                  {
                    var myPWArray=composite_chr_str.split("");
                  }
      
                  for (i=0; i < usr_req_length; i++)
                  {
                      if (typeof myGeneratedPW == "undefined")
                          {
                              myGeneratedPW = myPWArray[Math.floor(Math.random() * myPWArray.length-1)];
                          }
                          else
                          {
                              myGeneratedPW = myGeneratedPW + myPWArray[Math.floor(Math.random() * myPWArray.length-1)];
                          }
      
                  }
                  return myGeneratedPW;
              }
      
          function generate_password(usr_req_length, allow_specials_chars, allow_numeric_chars, allow_lowercase_alphabet, allow_uppercase_alphabet)
              {
                  var generated_pw;

                  for (pw_length=1; (pw_length <= usr_req_length); pw_length++)
                  {
                      var ascii_char_code = Math.floor(Math.random() * (126-33)) + 33;
      
                    //   while (ascii_char_code <= 32)
                    //   {
                    //       ascii_char_code = Math.floor(Math.random() * 126);
                    //   }
                      
                      if (allow_specials_chars)
                      {
                          if (ascii_char_code >= 33 && ascii_char_code <= 47)
                          {
                              if (typeof generated_pw == "undefined")
                              {
                                  generated_pw = String.fromCharCode(ascii_char_code);
                              }
                              else
                              {
                                  generated_pw = generated_pw + String.fromCharCode(ascii_char_code);String.fromCharCode(ascii_char_code);
                              }
                          }
      
                          if (ascii_char_code >= 58 && ascii_char_code <= 64)
                          {
                              if (typeof generated_pw == "undefined")
                              {
                                  generated_pw = String.fromCharCode(ascii_char_code);
                              }
                              else
                              {
                                  generated_pw = generated_pw + String.fromCharCode(ascii_char_code);String.fromCharCode(ascii_char_code);
                              }
                          }
      
                          if (ascii_char_code >= 91 && ascii_char_code <= 96)
                          {
                              if (typeof generated_pw == "undefined")
                              {
                                  generated_pw = String.fromCharCode(ascii_char_code);
                              }
                              else
                              {
                                  generated_pw = generated_pw + String.fromCharCode(ascii_char_code);String.fromCharCode(ascii_char_code);
                              }
                          }
      
      
                          if (ascii_char_code >= 123 && ascii_char_code <= 126)
                          {
                              if (typeof generated_pw == "undefined")
                              {
                                  generated_pw = String.fromCharCode(ascii_char_code);
                              }
                              else
                              {
                                  generated_pw = generated_pw + String.fromCharCode(ascii_char_code);String.fromCharCode(ascii_char_code);
                              }
                          }
                      }
      
                      if (allow_numeric_chars)
                      {
                          if (ascii_char_code >= 48 && ascii_char_code <= 57)
                          {
                              if (typeof generated_pw == "undefined")
                                  {
                                      generated_pw = String.fromCharCode(ascii_char_code);
                                  }
                                  else
                                  {
                                      generated_pw = generated_pw + String.fromCharCode(ascii_char_code);String.fromCharCode(ascii_char_code);
                                  }
                          }
                      }
      
                      if (allow_lowercase_alphabet)
                      {
                          if (ascii_char_code >= 97 && ascii_char_code <= 122)
                          {
                              if (typeof generated_pw == "undefined")
                                  {
                                      generated_pw = String.fromCharCode(ascii_char_code);
                                  }
                                  else
                                  {
                                      generated_pw = generated_pw + String.fromCharCode(ascii_char_code);String.fromCharCode(ascii_char_code);
                                  }
                          }
                      }
      
                      if (allow_uppercase_alphabet)
                      {
                          if (ascii_char_code >= 65 && ascii_char_code <= 90)
                          {
                              if (typeof generated_pw == "undefined")
                                  {
                                      generated_pw = String.fromCharCode(ascii_char_code);
                                  }
                                  else
                                  {
                                      generated_pw = generated_pw + String.fromCharCode(ascii_char_code);String.fromCharCode(ascii_char_code);
                                  }
                          }
                      }
                  }
      
                  return generated_pw;
              }

              function run_pw_generate()
              {
                  var pwOptions=document.querySelector("#chkbx_array");

                  var strGeneratedPW=generate_password(document.getElementsByName("pw_length").value, pwOptions[0], pwOptions[1], pwOptions[2], pwOptions[3]);
                  var arrGeneratedPW=gen_pw_array_vs(document.getElementsByName("pw_length").value, pwOptions[0], pwOptions[1], pwOptions[2], pwOptions[3]);
              }
        </script>
    </body>
</html>


